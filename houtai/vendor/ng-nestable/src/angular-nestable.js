!function(e,t,n,o){n.module("ng-nestable",[]).provider("$nestable",function(){var e="$item",t={};this.$get=function(){return{modelName:e,defaultOptions:t}},this.modelName=function(t){e=t},this.defaultOptions=function(e){t=e}}).directive("ngNestable",["$compile","$nestable",function(e,t){function o(e,t){var n=$('<div class="dd"></div>'),o=$('<ol class="dd-list"></ol>').appendTo(n);return e.forEach(function e(n){var i=Array.prototype.slice.call(arguments).slice(-1)[0];i instanceof $||(i=o);var l=$('<li class="dd-item"></li>');if($('<div ng-nestable-item class="dd-handle"></div>').append(t).appendTo(l),i.append(l),l.data("item",n.item),a(n.children)&&n.children.length>0){var r=$('<ol class="dd-list"></ol>').appendTo(l);n.children.forEach(function(t){e.apply(this,Array.prototype.slice.call(arguments).concat([r]))})}}),n}function a(e){return"[object Array]"===Object.prototype.toString.call(e)}function i(e,t){var n=t.$formatters,o=n.length;for(t.$modelValue=e;o--;)e=n[o](e);return e}return{restrict:"A",require:"ngModel",compile:function(n){var a=n.html();return n.empty(),function(n,l,r,c){var d=$.extend({},t.defaultOptions,n.$eval(r.ngNestable));n.$watchCollection(function(){return c.$modelValue},function(t){if(t){t=i(t,c);var r=o(t,a);l.empty().append(r),e(r)(n),r.nestable(d),r.on("change",function(){c.$setViewValue(r.nestable("serialize")),n&&n.$root&&n.$root.$$phase||n.$apply()})}})}},controller:n.noop}}]).directive("ngNestableItem",["$nestable",function(e){return{scope:!0,require:"^ngNestable",link:function(t,n){t[e.modelName]=n.parent().data("item")}}}])}(window,document,window.angular);